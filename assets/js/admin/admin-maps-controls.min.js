var gmb_data,gmb_upload_marker,trafficLayer=new google.maps.TrafficLayer,transitLayer=new google.maps.TransitLayer,bicycleLayer=new google.maps.BicyclingLayer,placeSearchAutocomplete;!function(e){"use strict";function a(){var a=e(".map-autocomplete-wrap"),n=e("#map-location-autocomplete").get(0),o=new google.maps.places.Autocomplete(n);o.bindTo("bounds",map),google.maps.event.addListener(o,"place_changed",function(){var n=o.getPlace();return n.geometry?(n.geometry.viewport?map.fitBounds(n.geometry.viewport):(map.setCenter(n.geometry.location),map.setZoom(17)),e(a).find(".mfp-close").trigger("click"),void t(a)):void window.alert("Autocomplete's returned place contains no geometry")}),google.maps.event.addDomListener(n,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}function t(a){e(a).addClass("mfp-hide").appendTo(".modal-placeholder").unwrap()}function n(){e(".edit-title").on("click",function(){e("#modal_title").val(e("input#title").val())}),e("#modal_title").on("blur",function(){e("input#title").val(e(this).val())})}function o(){var a=e(".lat-lng-update-btn"),t=e(".update-lat-lng"),n=map.getCenter();e(".live-latitude").text(n.lat()),e(".live-longitude").text(n.lng()),t.attr("data-lat",n.lat()),e(".lat-lng-change-message").slideDown(),t.attr("data-lng",n.lng()),a.attr("data-lat",n.lat()),a.attr("data-lng",n.lng()),a.removeAttr("disabled"),t.removeAttr("disabled")}e(window).on("load",function(){a(),n(),google.maps.event.addListener(map,"drag",function(){o()}),google.maps.event.addListener(map,"dragend",function(){o()}),google.maps.event.addListener(map,"zoom_changed",function(){o()}),e("body").on("click",".gmb-magnific-inline",function(a){a.preventDefault();var n="."+e(this).data("target"),o=e(this).data("auto-focus");if(e.magnificPopup.instance.isOpen===!0){e(n).before('<div class="modal-placeholder"></div>').removeClass("mfp-hide").appendTo(".magnific-builder #poststuff");var i=e(n).find(".inner-modal-wrap"),l=e(n).find(".inner-modal-container");0==i.length&&0==l.length&&(e(n).addClass("white-popup").wrapInner('<div class="inner-modal-wrap"><div class="inner-modal-container"><div class="inner-modal clearfix"></div></div></div>'),e('<button type="button" class="gmb-modal-close">&times;</button>').prependTo(e(n).find(".inner-modal"))),e(n).on("click",function(a){(e(a.target).hasClass("inner-modal-wrap")||e(a.target).hasClass("inner-modal-container"))&&t(n)}),e(".gmb-modal-close").on("click",function(){t(n)}),1==o&&e(n).find('input[type="text"]').focus()}else e.magnificPopup.open({callbacks:{beforeOpen:function(){e(n).addClass("white-popup")}},items:{src:e(n),type:"inline"},midClick:!0})})})}(jQuery);